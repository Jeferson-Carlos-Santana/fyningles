{% load static %}
{% csrf_token %}
<!DOCTYPE html>
<html>
    <head>
        <link rel="manifest" href="{% static 'manifest.json' %}">
        <meta name="theme-color" content="#000000">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
        <meta charset="utf-8">
        <title>chat</title>
        <link rel="stylesheet" href="{% static 'chat/css/style.css' %}">
        <link rel="stylesheet" href="{% static 'chat/css/phrase_progress.css' %}">
        <link rel="stylesheet" href="{% static 'chat/css/btn.css' %}">
        <link rel="stylesheet" href="{% static 'chat/css/others.css' %}">    
    </head>
    <body>
        <div class="layout">
            <main class="content">
                <div class="content-inner">
                     <div class="tittle-cont">
                         <a href="{% url 'dashboard' %}" class="menu-toggle" aria-label="Voltar ao dashboard">
                                <img src="{% static 'chat/img/back.png' %}" alt="Menu">
                            </a> 
                        <span>Frases em andamento</span>    
                        <form method="post" action="/admin/logout/" class="logout-form">
                            {% csrf_token %}
                            <button class="btn-sair" type="submit" aria-label="Sair">
                                <img src="{% static 'chat/img/log-out.png' %}" alt="Sair" width="41">
                            </button>
                        </form>
                    </div>
                    <div class="content-cont">                        

                        <div class="phrases-grid">
                        <input type="text" class="phrase-search" id="phraseSearch" placeholder="Buscar frase...">
                        {% for f in frases %}
                        <div class="phrase-item" data-text="{{ f.text|lower }}">
                            
                            <!-- <button class="btn-learned" type="button" data-chat-id="{{ f.chat_id }}">Já aprendi</button> -->
                            <div class="phrase-body">
                                <div class="phrase-text">{{ f.text }}</div>
                                <div class="phrase-text phrase-text-pt">{{ f.text_pt }}</div>
                                <div class="phrase-progress">
                                    
                                    <div class="phrase-progress-bar">
                                        <progress class="phrase-progress-fill"
                                                value="{{ f.percent }}"
                                                max="100"></progress>
                                    </div>
                                    <div class="phrase-progress-label">{{ f.percent }}%</div>
                                     
                                </div>
                                <button class="btn-learned" type="button" data-chat-id="{{ f.chat_id }}">Já aprendi</button>
                            </div>
                        </div>
                          {% endfor %}
                      </div>

                    </div>
                    
                    <div class="footer-cont">
                         <i><strong>© 2026 - JPM-development - All rights reserved - Engineering & Technology</strong><i>                        
                    </div>                  
                </div>
            </main>
        </div>
        <!-- MODAL JÁ APRENDI -->
        <div id="learned-modal" class="nivel-modal" style="display:none;">
            <div class="nivel-box">
                <button class="nivel-close" aria-label="Fechar">×</button>

                <h3>Quanto você já aprendeu?</h3>
                <p>Importante saber que, se escolher 100% a frase vai para setor de frases concluídas.</p>
                <label><input type="radio" name="learned_percent" value="25"> Já aprendi 25%</label>
                <label><input type="radio" name="learned_percent" value="50"> Já aprendi 50%</label>
                <label><input type="radio" name="learned_percent" value="75"> Já aprendi 75%</label>
                <label><input type="radio" name="learned_percent" value="100" checked> Já aprendi 100%</label>

                <button id="btn-confirm-learned" type="button">Confirmar</button>
            </div>
        </div>
        <script src="{% static 'chat/js/script.js' %}"></script>
        <script src="{% static 'chat/js/phrase_progress.js' %}"></script>  
    </body>
</html>
